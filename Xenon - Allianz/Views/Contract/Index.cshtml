@model Xenon___Allianz.Models.ContractListModel

@{
    ViewBag.Title = "List of contract";
}



<div class="page-header">
    <h2>List of Contract</h2>
</div>
@if (((string)Session["XenonStatus"]) == "souscripteur")
{
    <div class="row">

        <div class="col-md-3">
            <p class="">
                @Html.ActionLink("add New contract", "Create/" + (Guid)(Session["currentWallet"]), "Contract")
            </p>
        </div>
        <div class="col-md-6"></div>
        <div class="col-md-3">
            <div class="form-group pull-right">
                <select class="form-control pull-right" id="numberElementsByPage">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                </select>
            </div>
        </div>
    </div>
}

<div class="row">
    @foreach (var item in Model.ContractList)
    {
        <div class="col-sm-6 col-md-3">
            <div class="thumbnail">
                <div class="caption">
                    <h3> @Html.DisplayFor(modelItem => item.Company)</h3>
                    <p>Start at : @Html.DisplayFor(modelItem => item.Start.ToString().Split(' ')[0])</p>
                    <p>
                        @{
                            if (((string)Session["XenonStatus"]) == "souscripteur")
                            {
                                @Html.ActionLink("Details", "Detail", "Contract",
                                                                                 new
                                                                                 {
                                                                                     @id = item.Id
                                                                                 },
                                                                                 new
                                                                                 {
                                                                                     @class = "btn btn-primary"
                                                                                 })


                                <!--@Html.ActionLink("Edit to do", "Edit", "Wallet",
                                new { @id = item.Id }, new { @class = "btn btn-success" })
                                      -->
                            }
                            else if (((string)(Session["XenonStatus"])).Equals("manager"))
                            {
                                @Html.ActionLink("Details", "Detail", "Contract",
                                                                                 new
                                                                                 {
                                                                                     @id = item.Id
                                                                                 },
                                                                                 new
                                                                                 {
                                                                                     @class = "btn btn-primary"
                                                                                 })
                            }

                            else
                            {

                            }
                        }


                    </p>

                </div>
            </div>
        </div>
    }
</div>
<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <div class="btn-toolbar" role="toolbar" aria-label="...">
            <div class="btn-group" role="group" aria-label="...">
                @{
                    int numberOfElements = Model.NumberOfContractInWallet;
                    int numberOfElementByPage = 10;
                    int n = numberOfElements / numberOfElementByPage;
                    int m = ((numberOfElements % numberOfElementByPage) == 0) ? n : n + 1;

                    for (int i = 1; i <= m; i++)
                    {

                        string s = (Guid)(Session["currentWallet"]) + "," + i;

                        <button class="btn btn-default" id=@s onclick='test2("@s")'>@i</button>

                    } }

            </div>
        </div>
    </div>
    <div class="col-md-4"></div>

</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval"),
    @Scripts.Render("~/bundles/ContractPagination/js")
}
